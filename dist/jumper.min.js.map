{"version":3,"sources":["jumper.js"],"names":["Jumper","options","console","error","debug","Options","Log","bindFnKeys","bindLetter","cache","Cache","data","ajax","ajaxserver","jQuery","$","selectize","emulateTransitionEnd","BootstrapDialog","Bootstrap3","toLowerCase","cacheAtInit","window","on","ProcessKey","showKeys","KeysControl","toUpperCase","post","jumper_version","VERSION","response","InCache","Initialized","event","eval","String","fromCharCode","which","preventDefault","Open","Rebind","Unbind","off","UpdateBSD","setHtml","html","TEXT_QuickNav","BSD_Object","setMessage","jt","focus","removeClass","$select","persist","maxItems","valueField","labelField","searchField","render","item","escape","attr","action","useItemHandler","ItemHandler","url","length","location","href","method","setTimeout","close","TEXT_Navigating","option","label","name","caption","help","keywords","TEXT_Keywords","load","query","callback","BSD_Open","Modal","title","TEXT_DefaultTitle","draggable","closable","closeByBackdrop","closeByKeyboard","onhide","onhidden","onshow","remove","message","TEXT_Loading","onshown","log","show","apply","arguments","BSD_AjaxLoader"],"mappings":"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","file":"jumper.min.js","sourcesContent":["Jumper = function (options) {\n    if (typeof options == 'undefined') {\n        console.error('QOX Jumper options not stablished.');\n    }\n    if (typeof options.debug == 'undefined') {\n        Jumper.Options.debug = false;\n    }\n    else {\n        Jumper.Options.debug = options.debug;\n    }\n    Jumper.Log('Initilizing QOX Jumper.');\n    if (typeof options.bindFnKeys != 'undefined') {\n        Jumper.Options.bindFnKeys = options.bindFnKeys;\n    }\n    if (typeof options.bindLetter == 'undefined') {\n        options.bindLetter = 'J';\n    }\n    if (typeof options.cache != 'undefined') {\n        Jumper.Cache = options.cache;\n    }\n    if (typeof options.data != 'undefined') {\n        Jumper.Options.data = options.data;\n    }\n    else {\n        if (typeof options.ajax == 'undefined') {\n            console.error('QOX Jumper: No data source defined.');\n        }\n        else {\n            Jumper.Options.ajax = true;\n            Jumper.Options.ajaxserver = options.ajaxserver;\n        }\n    }\n    if (typeof jQuery == 'undefined') {\n        console.error('QOX Jumper requires jQuery.');\n        return;\n    }\n    if (typeof $().selectize == 'undefined') {\n        console.error('QOX Jumper requires Selectize.js (https://github.com/brianreavis/selectize.js).');\n        return;\n    }\n    if ((typeof $().emulateTransitionEnd == 'function')) {\n        if (typeof BootstrapDialog === 'undefined') {\n            console.error('QOX Jumper for Bootstrap requires Bootstrap-Dialog (https://github.com/nakupanda/bootstrap3-dialog).');\n            return;\n        }\n        else {\n            Jumper.Bootstrap3 = true;\n        }\n    }\n    Jumper.Options.bindLetter = options.bindLetter.toLowerCase();\n    Jumper.Options.cacheAtInit = true;\n    $(window).on('keydown', Jumper.ProcessKey);\n    var showKeys = 'CONTROL/COMMAND';\n    if (Jumper.Options.bindFnKeys != Jumper.KeysControl)\n        showKeys = Jumper.Options.bindFnKeys;\n    Jumper.Log('QOX Jumper: Initialized. (Open with: ' + showKeys + ' + ' + Jumper.Options.bindLetter.toUpperCase() + ')');\n    if (Jumper.Options.ajax && Jumper.Cache && Jumper.Options.cacheAtInit) {\n        Jumper.Log('QOX Jumper: PreCaching results @ Init...');\n        $.post(Jumper.Options.ajaxserver, { 'jumper_version': Jumper.VERSION }, function (data) {\n            Jumper.Options.data = data.response;\n            Jumper.InCache = true;\n            Jumper.Log('QOX Jumper: PreCaching results...DONE');\n        }, 'json');\n    }\n    Jumper.Initialized = true;\n};\nJumper.ProcessKey = function (event) {\n    if (eval(Jumper.Options.bindFnKeys)) {\n        Jumper.Log(String.fromCharCode(event.which).toLowerCase());\n        switch (String.fromCharCode(event.which).toLowerCase()) {\n            case Jumper.Options.bindLetter:\n                event.preventDefault();\n                Jumper.Open();\n                break;\n        }\n    }\n};\nJumper.Rebind = function () {\n    $(window).on('keydown', Jumper.ProcessKey);\n};\nJumper.Unbind = function () {\n    $(window).off('keydown', Jumper.ProcessKey);\n};\nJumper.UpdateBSD = function (setHtml) {\n    if (!(typeof setHtml != 'undefined' && setHtml)) {\n        var html = '<input class=\"selectize-input items not-full has-options\" id=\"jumper_text\" style=\"width:100%\" type=\"text\" autocomplete=\"off\" placeholder=\"' + Jumper.TEXT_QuickNav +\n            '\">';\n        Jumper.BSD_Object.setMessage(html);\n    }\n    var jt = $(\"#jumper_text\");\n    jt.focus();\n    jt.removeClass('selectize-input items not-full has-options');\n    var $select = jt.selectize({\n        persist: false,\n        maxItems: 1,\n        valueField: 'name',\n        labelField: 'name',\n        searchField: ['name', 'help', 'keywords', 'navcode'],\n        options: Jumper.Options.data,\n        render: {\n            item: function (item, escape) {\n                $(\"#jumper_text\").attr('disabled', 'disabled');\n                if (item.action.useItemHandler) {\n                    Jumper.ItemHandler(item);\n                }\n                if (typeof item.action.url != 'undefined') {\n                    if (item.action.url != null) {\n                        if (item.action.url.length > 0) {\n                            window.location.href = item.action.url;\n                        }\n                    }\n                }\n                if (typeof item.action.method != 'undefined') {\n                    if (item.action.method != null) {\n                        item.action.method(item);\n                    }\n                }\n                setTimeout(function () {\n                    Jumper.BSD_Object.close();\n                }, 250);\n                return '<div style=\"color: #000\">' +\n                    escape(Jumper.TEXT_Navigating) + '</span>' +\n                    '</div>';\n            },\n            option: function (item, escape) {\n                var label = item.name;\n                var caption = item.help;\n                return '<div style=\"color: #000\">' +\n                    '<span style=\"font-width:bold;\">' +\n                    escape(label) +\n                    '</span><br>' +\n                    '<span class=\"text-muted\">' +\n                    escape(caption) +\n                    '</span><br>' +\n                    (item.keywords ? '<span style=\"color: #000;\">' + Jumper.TEXT_Keywords + '</span>' +\n                        '&nbsp;<span class=\"text-muted\">' + escape(item.keywords) + '</span>' : '')\n                    + '</div>';\n            }\n        },\n        load: function (query, callback) {\n            if (!query.length)\n                return callback();\n        }\n    });\n    var selectize = $select[0].selectize;\n    setTimeout(function () {\n        selectize.focus();\n    }, 50);\n};\nJumper.Open = function () {\n    if (Jumper.Initialized) {\n        if (Jumper.Bootstrap3) {\n            if (!Jumper.BSD_Open) {\n                Jumper.Log('Triggered!');\n                var Modal = {\n                    title: Jumper.TEXT_DefaultTitle,\n                    draggable: false,\n                    closable: true,\n                    closeByBackdrop: true,\n                    closeByKeyboard: true,\n                    onhide: function () {\n                        Jumper.BSD_Open = false;\n                    },\n                    onhidden: function () {\n                        Jumper.BSD_Open = false;\n                    },\n                    onshow: function () {\n                        Jumper.BSD_Open = true;\n                        $('.modal-footer').remove();\n                    }\n                };\n                if (Jumper.Options.ajax && !Jumper.InCache) {\n                    Modal.message = \"<div style=\\\"text-align: center;\\\">\\n                    <p>\\n                    <i class=\\\"fa fa-refresh fa-spin\\\"></i><br>\\n                    \" + Jumper.TEXT_Loading + \"\\n                    </p>\\n                    </div>\";\n                    Modal.onshown = function () {\n                        Jumper.Log('QOX Jumper: Getting data.');\n                        $.post(Jumper.Options.ajaxserver, { 'jumper_version': Jumper.VERSION }, function (data) {\n                            Jumper.Options.data = data.response;\n                            if (Jumper.Cache) {\n                                Jumper.InCache = true;\n                            }\n                            Jumper.UpdateBSD(false);\n                        }, 'json');\n                    };\n                }\n                else {\n                    if (Jumper.Cache) {\n                        console.log('QOX Jumper: Using Cached data.');\n                    }\n                    Modal.message = '<input class=\"selectize-input items not-full has-options\" style=\"width:100%\" id=\"jumper_text\" type=\"text\" autocomplete=\"off\" placeholder=\"' + Jumper.TEXT_QuickNav +\n                        '\">';\n                    Modal.onshown = function () {\n                        Jumper.UpdateBSD(true);\n                    };\n                }\n                Jumper.BSD_Object = BootstrapDialog.show(Modal);\n            }\n        }\n        else {\n            console.error('Support for non-bootstrap sites in the future. Sorry.');\n        }\n    }\n};\nJumper.Log = function () {\n    if (Jumper.Options.debug) {\n        console.log.apply(console, arguments);\n    }\n};\nJumper.ItemHandler = function (item) {\n    Jumper.Log('Default Item Handler, Item:', item);\n};\nJumper.VERSION = '0.0.4';\nJumper.Initialized = false;\nJumper.Bootstrap3 = false;\nJumper.Options = {\n    bindFnKeys: 'event.ctrlKey || event.metaKey',\n    bindLetter: 'J',\n    data: null,\n    ajax: false,\n    ajaxserver: '',\n    cacheAtInit: false,\n    debug: false\n};\nJumper.BSD_Object = null;\nJumper.Cache = false;\nJumper.InCache = false;\nJumper.TEXT_Loading = 'Loading data, please wait...';\nJumper.TEXT_DefaultTitle = '<b>Jumper</b>';\nJumper.TEXT_QuickNav = 'Quick site navigation, type a term.';\nJumper.TEXT_Navigating = 'Navigating...';\nJumper.TEXT_Keywords = 'Keywords:';\nJumper.BSD_Open = false;\nJumper.BSD_AjaxLoader = {};\n"]}